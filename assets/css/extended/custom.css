/* =========================================================== */
/* 博客排版优化: 借鉴 Maple 公众号样式主题 */
/* =========================================================== */

/* UI 与结构：黑体（无衬线） */
html,
body {
    font-family: "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
        "Noto Sans CJK SC", "Source Han Sans SC",
        system-ui, -apple-system, sans-serif !important;
}

/* 文章标题与结构标题：黑体 */
h1,
h2,
h3,
h4,
h5,
h6,
.post-title,
.home-info h1,
.entry-header h1,
.entry-header h2,
.page-header h1 {
    font-family: "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
        "Noto Sans CJK SC", "Source Han Sans SC",
        system-ui, -apple-system, sans-serif !important;
}

/* 列表卡片标题截断（单行省略） */
.post-entry .entry-header h2 {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* 文章正文：文楷 */
.post-content,
.post-content p,
.post-content li,
.post-content blockquote,
.entry-content {
    font-family: "LXGW WenKai Screen", serif !important;
}

/* 栏目/列表页简介（list 页面）使用黑体 */
.list .post-content,
.list .post-content p,
.list .post-content li,
.list .post-content blockquote {
    font-family: "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
        "Noto Sans CJK SC", "Source Han Sans SC",
        system-ui, -apple-system, sans-serif !important;
}

/* 导航、标签、按钮、元信息等 UI 文字 */
nav,
#menu,
.menu,
.entry-footer,
.post-meta,
.breadcrumbs,
.pagination,
.post-tags,
.tag,
.terms-tags,
.footer,
.social-icons,
.button,
.post-description,
.post-description p {
    font-family: "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
        "Noto Sans CJK SC", "Source Han Sans SC",
        system-ui, -apple-system, sans-serif !important;
}

/* 栏目页标题与简介的间距 */
.page-header .post-description {
    margin-top: 0.6em;
}

/* 1. 标题与 Meta间距 */
.post-title {
    margin-bottom: 20px;
}

/* 2. 基础容器与段落排版 (兼容暗色模式) */
.post-content {
    line-height: 1.8;
    letter-spacing: 0.02em;
    text-align: justify;
}

.post-content p {
    margin-top: 0;
    margin-bottom: 1.2em;
    line-height: 1.8;
}

/* 代码字体使用系统等宽字体栈 */
code,
pre,
kbd,
samp {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
        "Liberation Mono", "Courier New", monospace !important;
}

/* 3. 标题层级 */
.post-content h2 {
    font-weight: 700;
    font-size: 1.5em;
    margin-top: 1.6em;
    margin-bottom: 1.2em;
    line-height: 1.45;
    border-left: 6px solid var(--primary);
    /* 边框跟随主题 */
    padding-left: 12px;
}

.post-content h3 {
    font-weight: 600;
    font-size: 1.25em;
    margin-top: 1.8em;
    margin-bottom: 0.8em;
}

.post-content h4 {
    font-weight: 600;
    font-size: 1.12em;
    line-height: 1.55;
    margin-top: 1.3em;
    margin-bottom: 0.45em;
}

/* 4. 列表：实现冒号后的“吸附感” */
.post-content ul,
.post-content ol {
    margin-top: 0.05em;
    margin-bottom: 1.5em;
    padding-left: 1.8em;
}

/* 标题后紧跟列表的间距微调 */
.post-content h3+ul,
.post-content h3+ol {
    margin-top: 0.2em !important;
}

.post-content h4+ul,
.post-content h4+ol {
    margin-top: 0.05em !important;
}

.post-content li {
    margin-bottom: 0.4em;
    line-height: 1.8;
}

/* 5. 引用块 (自适应日夜间模式) */
.post-content blockquote {
    font-size: 0.95rem;
    margin: 1.8em 0;
    padding: 1.2em 1.5em;
    /* 全部改为引用预设的主题变量 */
    color: var(--secondary);
    background-color: var(--code-bg);
    border-left: 4px solid var(--border);
}

/* 6. 图片美化 (暗色模式下调暗阴影) */
.post-content img {
    border-radius: 6px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.06);
    margin: 1.7em auto;
}

[data-theme="dark"] .post-content img {
    box-shadow: 0 4px 15px rgba(255, 255, 255, 0.03);
}

/* 表格优化（适配亮暗模式） */
.post-content table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 1rem;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
}

.post-content thead th {
    vertical-align: bottom;
    border-bottom: 2px solid rgba(0, 0, 0, 0.25);
}

.post-content td,
.post-content th {
    vertical-align: top;
    border-top: 1px solid rgba(0, 0, 0, 0.18);
    border-bottom: 1px solid rgba(0, 0, 0, 0.18);
    padding: 0.5rem 0.75rem;
}

.post-content tbody tr:nth-of-type(2n + 1) {
    background-color: rgba(0, 0, 0, 0.03);
}

.post-content tbody tr:hover {
    background-color: rgba(0, 0, 0, 0.06);
}

[data-theme="dark"] .post-content thead th {
    border-bottom: 2px solid rgba(255, 255, 255, 0.25);
}

[data-theme="dark"] .post-content td,
[data-theme="dark"] .post-content th {
    border-top: 1px solid rgba(255, 255, 255, 0.18);
    border-bottom: 1px solid rgba(255, 255, 255, 0.18);
}

[data-theme="dark"] .post-content tbody tr:nth-of-type(2n + 1) {
    background-color: rgba(255, 255, 255, 0.03);
}

[data-theme="dark"] .post-content tbody tr:hover {
    background-color: rgba(255, 255, 255, 0.06);
}

/* 首页信息块：去卡片化 */
.home-info {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    min-height: unset !important;
    margin-bottom: calc(var(--gap) / 2) !important;
    padding: 0 !important;
}

/* 移动端左右留白 */
@media (max-width: 640px) {
    .main {
        padding-left: 20px;
        padding-right: 20px;
    }
}

/* =========================================================== */
/* 主页排版优化: 极简卡片式布局 (Card-based Layout) */
/* =========================================================== */

/* 1. 改变整个网页的底层背景色，营造空间感 */
body {
    background-color: #f5f6f8;
}

[data-theme="dark"] body {
    background-color: #1a1b1e;
    /* 暗色模式背景 */
}

/* 为了让阅读页面的内容区保持纯净，文章内页需要有个纯色底板 (可选，视需要开启) */
/* .main { background-color: var(--theme); } */

/* 2. 重塑主页文章列表项为“悬浮卡片” */
.post-entry,
.first-entry {
    background: #ffffff;
    border-radius: 12px;
    padding: 24px 32px;
    margin-bottom: 24px;
    border: none;
    /* 移除可能的边框 */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
    /* 非常轻微的悬浮阴影 */
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

/* 鼠标悬浮时产生轻微的交互反馈 */
.post-entry:hover,
.first-entry:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
}

/* 3. 暗色模式下的卡片颜色反转 */
[data-theme="dark"] .post-entry,
[data-theme="dark"] .first-entry {
    background: #242528;
    /* 比底层暗背景稍微亮一点的深灰，形成层级 */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

[data-theme="dark"] .post-entry:hover,
[data-theme="dark"] .first-entry:hover {
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
}

/* 4. 隐藏原有的 PaperMod 默认底部虚线或边距 */
.post-entry+.post-entry,
.post-entry+.first-entry,
.first-entry+.post-entry {
    border-top: none;
}